---
    layout: default
    comments: true
    title:  【豆瓣怎么做】CaoE的知识储备篇
---

<h4><strong>{{ page.title }}</strong>&nbsp;&nbsp;<small>{{ page.date | date_to_string }}</small></h4><br />
<p>
    豆瓣怎么做系列文章意在讨论由豆瓣相关人员发布的开源工程代码 <a href="">了解详细</a>
</p>
<br>

<p>
    本篇来看 <a href="https://github.com/douban/CaoE">CaoE</a>
</p>
<p>
    实际上我们不是随意选择 repo 的
</p>
<p>
    CaoE 这个仅仅百行代码的 repo 被选定是因为涉及了明了的进程操作, 代码精炼，涉及很多可拓展知识
</p>
<p>
    我们更希望从简洁精炼的代码中汲取能力 谁不想呢 让更少的代码做更多的事情
</p>

<br>
<h5><strong>知识节点一: fork() </strong></h5>
<p>
    进程的概念不赘述，实际上它是计算机科学中“最深刻最成功的概念之一”(引自《深入理解计算机系统》)
</p>
<p>
    系统函数 fork() 在进程操作中用于创建子进程，子进程会是父进程的复制，用PID来作为区分
</p>
<p>
    fork() 函数的有趣之处在于:
</p>
<p>
    每次调用 fork() 函数将返回两次, 一次返回子进程的PID 另外一次返回 0
</p>
<p>
    因为子进程的PID不可能为 0, 所以两次返回可用于区分当前程序的运行位置（是在父进程中还是在子进程中）
</p>

<br>
<pre>
    PID = os.fork()
    if PID == 0 :
        当前运行于子进程中 (子进程的PID是不可能为 0 )
    else:
        当前运行于父进程中
</pre>

<p>
    fork() 的规则并不难，但使用的时候容易混淆, 作为进程操作基础也不是我们讨论的重点
</p>

<br>
<h5><strong>知识节点二: 系统信号 </strong></h5>
<p>
    Signal 是系统的事件消息信号，接收到信号的进程会完成自己的信号处理操作，包括忽略
</p>
<p>
    在 shell 中输入  man signal ， 可以查看 Linux 系统的信号
    <img src='http://vince67.github.io/static/img/douban/1-1.png' height="500" width="900" ><br />
</p>
<p>
    系统通过信号机制通知用户进程当前发生的事件，最常用 我们键入 Ctrl＋C ，系统会发送 SIGKILL 信号给进程，使进程终止
</p>
<br>
<p>
    实际上可以从两方面对信号做简单理解，即发送信号，接受信号。
</p>
<p>
    Linux 提供多种机制发送信号给进程，比如 kill(pid_t pid, int sig) 函数， 值得注意的是 pid 的值既可用于选择进程目标也可用于选择进程组
</p>
<p>
    进程接受信号作出的反应通过信号的 Handle 函数来实现， 或许像一个 SIGKILL 这样的终止信号对进程来讲是处理逻辑简单的
</p>
<p>
    而接收多个信号时对系统调用的阻塞，以及同类信号的处理等，有相应的机制
</p>
<p>
    本文中并未对知识点进行深度展示，因为这些知识都有成熟的资料可供查阅，我们指出这些知识点，将在接下来的代码对应解读环节贯穿。
</p>
